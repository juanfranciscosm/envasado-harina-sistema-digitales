--JARA YUPA ANA BELÉN, SÁNCHEZ MALDONADO JUAN FRANCISCO, Paralelo 101, Envasado de Harina 
--Decodificador BIN A BCD, 21 dic. 

library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;

entity DecoBin_BCD is
    port(
        num_bin: in  std_logic_vector(8 downto 0);
        num_bcd: out std_logic_vector(10 downto 0));
end DecoBin_BCD;

architecture solve of DecoBin_BCD is
	begin
	proceso_bcd: process(num_bin)
	variable z: std_logic_vector(19 downto 0);
		begin
		z := (others => '0');
		z(11 downto 3) := num_bin;
		for i in 0 to 5 loop
			if z(12 downto 9) > 4 then
				z(12 downto 9) := z(12 downto 9) + 3;
			end if;
			if z(16 downto 13) > 4 then
				z(16 downto 13) := z(16 downto 13) + 3;
			end if;
			if z(19 downto 17) > 4 then
				z(19 downto 17) := z(19 downto 17) + 3;
			end if;
			z(19 downto 1) := z(18 downto 0);
		end loop;
		num_bcd <= z(19 downto 9);
	end process;
end solve;